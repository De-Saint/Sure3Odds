webpackJsonp([21],{723:function(n,e,l){"use strict";function t(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,0,null,null,1,"div",[["class","select-placeholder select-text"]],null,null,null,null,null)),(n()(),s["ɵted"](1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.placeholder)})}function a(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,0,null,null,1,"div",[["class","select-text"]],null,null,null,null,null)),(n()(),s["ɵted"](1,null,["",""]))],null,function(n,e){var l=e.component;n(e,1,0,l.selectedText||l._text)})}function i(n){return s["ɵvid"](0,[(n()(),s["ɵand"](16777216,null,null,1,null,t)),s["ɵdid"](1,16384,null,0,N.NgIf,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),s["ɵand"](16777216,null,null,1,null,a)),s["ɵdid"](3,16384,null,0,N.NgIf,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),s["ɵeld"](4,0,null,null,1,"div",[["class","select-icon"]],null,null,null,null,null)),(n()(),s["ɵeld"](5,0,null,null,0,"div",[["class","select-icon-inner"]],null,null,null,null,null)),(n()(),s["ɵeld"](6,0,null,null,1,"button",[["aria-haspopup","true"],["class","item-cover"],["ion-button","item-cover"],["type","button"]],[[8,"id",0],[1,"aria-labelledby",0],[1,"aria-disabled",0]],null,null,Q.b,Q.a)),s["ɵdid"](7,1097728,null,0,X.a,[[8,"item-cover"],S.a,s.ElementRef,s.Renderer],null,null)],function(n,e){var l=e.component;n(e,1,0,!l._text);n(e,3,0,l._text)},function(n,e){var l=e.component;n(e,6,0,l.id,l._labelId,l._disabled)})}function o(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,0,null,null,3,"ion-option",[],null,[[null,"ionSelect"]],function(n,e,l){var t=!0;if("ionSelect"===e){t=!1!==n.component.onPlantTypeSelect(l,n.context.$implicit)&&t}return t},null,null)),s["ɵdid"](1,16384,[[4,4]],0,A.a,[s.ElementRef],{value:[0,"value"]},{ionSelect:"ionSelect"}),(n()(),s["ɵted"](2,null,[""," - ","\n          "])),s["ɵppd"](3,3)],function(n,e){n(e,1,0,s["ɵinlineInterpolate"](1,"",e.context.$implicit.id,""))},function(n,e){n(e,2,0,e.context.$implicit.name,s["ɵunv"](e,2,1,n(e,3,0,s["ɵnov"](e.parent,0),e.context.$implicit.amount,"NGN","1.2-2")))})}function u(n){return s["ɵvid"](0,[s["ɵpid"](0,N.CurrencyPipe,[s.LOCALE_ID]),(n()(),s["ɵeld"](1,0,null,null,10,"ion-header",[],null,null,null,null,null)),s["ɵdid"](2,16384,null,0,E.a,[S.a,s.ElementRef,s.Renderer,[2,T.a]],null,null),(n()(),s["ɵted"](-1,null,["\n\n  "])),(n()(),s["ɵeld"](4,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,I.b,I.a)),s["ɵdid"](5,49152,null,0,L.a,[M.a,[2,T.a],[2,F.a],S.a,s.ElementRef,s.Renderer],null,null),(n()(),s["ɵted"](-1,3,["\n    "])),(n()(),s["ɵeld"](7,0,null,3,2,"ion-title",[],null,null,null,U.b,U.a)),s["ɵdid"](8,49152,null,0,O.a,[S.a,s.ElementRef,s.Renderer,[2,x.a],[2,L.a]],null,null),(n()(),s["ɵted"](-1,0,["Subscription"])),(n()(),s["ɵted"](-1,3,["\n  "])),(n()(),s["ɵted"](-1,null,["\n\n"])),(n()(),s["ɵted"](-1,null,["\n\n\n"])),(n()(),s["ɵeld"](13,0,null,null,49,"ion-content",[["class","sign"],["style","background-image:url('assets/imgs/welcome3.jpg')"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,G.b,G.a)),s["ɵdid"](14,4374528,null,0,D.a,[S.a,V.a,Y.a,s.ElementRef,s.Renderer,M.a,j.a,s.NgZone,[2,T.a],[2,F.a]],null,null),(n()(),s["ɵted"](-1,1,["\n  "])),(n()(),s["ɵeld"](16,0,null,1,45,"div",[["class","signForm"]],null,null,null,null,null)),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵeld"](18,0,null,null,0,"img",[["src","assets/imgs/appicon.png"],["style","width: 8em; height: 8em;"]],null,null,null,null,null)),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵeld"](20,0,null,null,29,"ion-list",[],null,null,null,null,null)),s["ɵdid"](21,16384,null,0,q.a,[S.a,s.ElementRef,s.Renderer,V.a,H.m,Y.a],null,null),(n()(),s["ɵted"](-1,null,["\n      "])),(n()(),s["ɵeld"](23,0,null,null,25,"ion-item",[["class","item item-block"]],null,null,null,K.b,K.a)),s["ɵdid"](24,1097728,null,3,$.a,[W.a,S.a,s.ElementRef,s.Renderer,[2,z.a]],null,null),s["ɵqud"](335544320,1,{contentLabel:0}),s["ɵqud"](603979776,2,{_buttons:1}),s["ɵqud"](603979776,3,{_icons:1}),s["ɵdid"](28,16384,null,0,B.a,[],null,null),(n()(),s["ɵted"](-1,2,["\n        "])),(n()(),s["ɵeld"](30,0,null,0,1,"ion-icon",[["color","light"],["item-left",""],["name","briefcase"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](31,147456,[[3,4]],0,J.a,[S.a,s.ElementRef,s.Renderer],{color:[0,"color"],name:[1,"name"]},null),(n()(),s["ɵted"](-1,2,["\n        "])),(n()(),s["ɵeld"](33,0,null,1,2,"ion-label",[["color","light"]],null,null,null,null,null)),s["ɵdid"](34,16384,[[1,4]],0,Z.a,[S.a,s.ElementRef,s.Renderer,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(n()(),s["ɵted"](-1,null,["\n          Select a plan per month\n        "])),(n()(),s["ɵted"](-1,2,["\n        "])),(n()(),s["ɵeld"](37,0,null,3,10,"ion-select",[["class",""],["id","plantype"],["name","plantype"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(n,e,l){var t=!0,a=n.component;if("click"===e){t=!1!==s["ɵnov"](n,38)._click(l)&&t}if("keyup.space"===e){t=!1!==s["ɵnov"](n,38)._keyup()&&t}if("ngModelChange"===e){t=!1!==(a.newuser.plantype.id=l)&&t}return t},i,tn)),s["ɵdid"](38,1228800,null,1,en.a,[M.a,W.a,S.a,s.ElementRef,s.Renderer,[2,$.a],ln.a],null,null),s["ɵqud"](603979776,4,{options:1}),s["ɵprd"](1024,null,nn.NG_VALUE_ACCESSOR,function(n){return[n]},[en.a]),s["ɵdid"](41,671744,null,0,nn.NgModel,[[8,null],[8,null],[8,null],[2,nn.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),s["ɵprd"](2048,null,nn.NgControl,null,[nn.NgModel]),s["ɵdid"](43,16384,null,0,nn.NgControlStatus,[nn.NgControl],null,null),(n()(),s["ɵted"](-1,null,["\n          "])),(n()(),s["ɵand"](16777216,null,null,1,null,o)),s["ɵdid"](46,802816,null,0,N.NgForOf,[s.ViewContainerRef,s.TemplateRef,s.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),s["ɵted"](-1,null,["\n        "])),(n()(),s["ɵted"](-1,2,["\n      "])),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵted"](-1,null,["\n      \n        "])),(n()(),s["ɵeld"](51,0,null,null,8,"button",[["angular4-paystack",""],["block",""],["color","color2"],["ion-button",""],["type","submit"]],null,[[null,"paymentInit"],[null,"close"],[null,"callback"],[null,"click"]],function(n,e,l){var t=!0,a=n.component;if("click"===e){t=!1!==s["ɵnov"](n,53).buttonClick()&&t}if("paymentInit"===e){t=!1!==a.paymentInit()&&t}if("close"===e){t=!1!==a.paymentCancel()&&t}if("callback"===e){t=!1!==a.paymentDone(l)&&t}if("click"===e){t=!1!==a.onPay(a.pay_amount)&&t}return t},Q.b,Q.a)),s["ɵdid"](52,1097728,null,0,X.a,[[8,""],S.a,s.ElementRef,s.Renderer],{color:[0,"color"],block:[1,"block"]},null),s["ɵdid"](53,16384,null,0,f.a,[],{key:[0,"key"],email:[1,"email"],amount:[2,"amount"],metadata:[3,"metadata"],ref:[4,"ref"],channels:[5,"channels"]},{close:"close",callback:"callback"}),s["ɵpod"](54,{display_name:0,variable_name:1,value:2}),s["ɵpod"](55,{display_name:0,variable_name:1,value:2}),s["ɵpad"](56,2),s["ɵpod"](57,{custom_fields:0}),(n()(),s["ɵted"](58,0,[" PAY  ","\n        "])),s["ɵppd"](59,3),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵted"](-1,null,["\n  "])),(n()(),s["ɵted"](-1,1,["\n"]))],function(n,e){var l=e.component;n(e,31,0,"light","briefcase");n(e,34,0,"light");n(e,41,0,"plantype",l.newuser.plantype.id);n(e,46,0,l.plantypelist);n(e,52,0,"color2","");n(e,53,0,l.public_key,l.newuser.email,100*l.pay_amount,n(e,57,0,n(e,56,0,n(e,54,0,"Customer Name","Customer Name",l.newuser.firstname+""+l.newuser.lastname),n(e,55,0,"Payment Type","Payment Type","Registration"))),l.random_id,l.channels)},function(n,e){var l=e.component;n(e,4,0,s["ɵnov"](e,5)._hidden,s["ɵnov"](e,5)._sbPadding);n(e,13,0,s["ɵnov"](e,14).statusbarPadding,s["ɵnov"](e,14)._hasRefresher);n(e,30,0,s["ɵnov"](e,31)._hidden);n(e,37,0,s["ɵnov"](e,38)._disabled,s["ɵnov"](e,43).ngClassUntouched,s["ɵnov"](e,43).ngClassTouched,s["ɵnov"](e,43).ngClassPristine,s["ɵnov"](e,43).ngClassDirty,s["ɵnov"](e,43).ngClassValid,s["ɵnov"](e,43).ngClassInvalid,s["ɵnov"](e,43).ngClassPending);n(e,58,0,s["ɵunv"](e,58,0,n(e,59,0,s["ɵnov"](e,0),l.pay_amount,"NGN","1.2-2")))})}Object.defineProperty(e,"__esModule",{value:!0});var s=l(0),r=(l(1),l(15),l(220)),c=l(221),d=l(66),p=l(733),m=l(224).c.Storage,h=function(){function n(n,e,l,t,a,i,o){this.loadingCtrl=n,this.events=e,this.nativeHttp=l,this.paymentsProvider=t,this.navCtrl=a,this.auth=i,this.navParams=o,this.newuser=new p.a("","","","","","","",{id:""},"",{id:"",name:""},{id:"",name:""}),this.channels=["card"],this.random_id=Math.floor(Date.now()/1e3),this.newuser=this.navParams.get("newuser"),this.sub_option=this.navParams.get("sub_option")}return n.prototype.ionViewWillEnter=function(){this.getPlantypes(),this.getParameter()},n.prototype.onPlantTypeSelect=function(n,e){this.pay_amount=e.amount},n.prototype.getPlantypes=function(){var n=this,e=this.loadingCtrl.create({content:"Please wait..."});e.present(),this.nativeHttp.getAllPlantypes().subscribe(function(l){e.dismiss().catch(function(){}),n.plantypelist=l.data},function(n){e.dismiss().catch(function(){})})},n.prototype.getParameter=function(){var n=this;this.nativeHttp.getParameter(1).subscribe(function(e){n.public_key=e.data.value})},n.prototype.onPay=function(n){this.auth.showToast("Please Wait ..."),this.pay_amount=this.auth.CalculatePercentage(n)},n.prototype.paymentInit=function(){},n.prototype.paymentDone=function(n){if("success"===n.status){var e=this.loadingCtrl.create({content:"Please wait..."});e.present(),this.newuser.platform="Android",this.newuser.referencecode=String(n.reference),"registration"===this.sub_option?this.onRegistration(e):"renewal"===this.sub_option&&this.onRenewal(e)}else this.auth.showToast("Please, the payment was not successful.")},n.prototype.paymentCancel=function(){this.auth.showToast("You cancelled the payment!")},n.prototype.onRegistration=function(n){var e=this;this.newuser.usertypes={id:2,name:""},this.nativeHttp.createNewUser(this.newuser).subscribe(function(l){200===l.statusCode?e.auth.login(String(e.newuser.email),String(e.newuser.password)).subscribe(function(l){n.dismiss().catch(function(){}),e.gotoHomePage(l,"AllMatchesPage")},function(l){n.dismiss().catch(function(){}),e.auth.showToast(l.error.description)}):(n.dismiss().catch(function(){}),e.auth.showToast(l.description))},function(l){n.dismiss().catch(function(){}),e.auth.showToast(l.error.description)})},n.prototype.onRenewal=function(n){var e=this;this.paymentsProvider.updatePlan(this.newuser.id,this.newuser.plantype.id,this.newuser.platform,this.newuser.referencecode).subscribe(function(l){n.dismiss().catch(function(){}),200===l.statusCode?e.navCtrl.pop():e.auth.showToast(l.description)},function(l){n.dismiss().catch(function(){}),e.auth.showToast(l.error.description)})},n.prototype.gotoHomePage=function(n,e){var l=this;this.navCtrl.setRoot(e).then(function(){m.set({key:"hasSeenLogin",value:"true"});var n=l.auth.currentUserDataValue.name,e=l.auth.currentUserDataValue.user_type;l.auth.showToast("Welcome "+n),l.events.publish("user:login",e,n)})},n}(),f=l(736),y=function(){return function(){}}(),g=l(208),v=l(209),b=l(210),w=l(211),P=l(212),C=l(213),k=l(214),R=l(215),_=l(216),A=l(158),N=l(14),E=l(54),S=l(3),T=l(7),I=l(92),L=l(37),M=l(9),F=l(20),U=l(146),O=l(61),x=l(38),G=l(91),D=l(30),V=l(5),Y=l(10),j=l(31),q=l(60),H=l(8),K=l(144),$=l(28),W=l(25),z=l(53),B=l(67),J=l(34),Z=l(62),Q=l(41),X=l(26),nn=l(24),en=l(225),ln=l(18),tn=s["ɵcrt"]({encapsulation:2,styles:[],data:{}}),an=l(145),on=l(100),un=l(17),sn=s["ɵcrt"]({encapsulation:2,styles:[],data:{}}),rn=s["ɵccf"]("page-subscription-android",h,function(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,0,null,null,1,"page-subscription-android",[],null,null,null,u,sn)),s["ɵdid"](1,49152,null,0,h,[an.a,on.a,r.a,c.a,F.a,d.a,un.a],null,null)],null,null)},{},{},[]),cn=l(142),dn=l(52);l.d(e,"SubscriptionAndroidPageModuleNgFactory",function(){return pn});var pn=s["ɵcmf"](y,[],function(n){return s["ɵmod"]([s["ɵmpd"](512,s.ComponentFactoryResolver,s["ɵCodegenComponentFactoryResolver"],[[8,[g.a,v.a,b.a,w.a,P.a,C.a,k.a,R.a,_.a,rn]],[3,s.ComponentFactoryResolver],s.NgModuleRef]),s["ɵmpd"](4608,N.NgLocalization,N.NgLocaleLocalization,[s.LOCALE_ID,[2,N["ɵa"]]]),s["ɵmpd"](4608,nn["ɵi"],nn["ɵi"],[]),s["ɵmpd"](4608,nn.FormBuilder,nn.FormBuilder,[]),s["ɵmpd"](512,N.CommonModule,N.CommonModule,[]),s["ɵmpd"](512,nn["ɵba"],nn["ɵba"],[]),s["ɵmpd"](512,nn.FormsModule,nn.FormsModule,[]),s["ɵmpd"](512,nn.ReactiveFormsModule,nn.ReactiveFormsModule,[]),s["ɵmpd"](512,cn.a,cn.a,[]),s["ɵmpd"](512,cn.b,cn.b,[]),s["ɵmpd"](512,f.b,f.b,[]),s["ɵmpd"](512,y,y,[]),s["ɵmpd"](256,dn.a,h,[])])})},733:function(n,e,l){"use strict";l.d(e,"a",function(){return t});var t=function(){return function(n,e,l,t,a,i,o,u,s,r,c){this.id=n,this.email=e,this.firstname=l,this.lastname=t,this.referencecode=a,this.password=i,this.phone=o,this.plantype=u,this.platform=s,this.usertypes=r,this.status=c}}()},736:function(n,e,l){"use strict";l.d(e,"a",function(){return i}),l.d(e,"b",function(){return o});var t=l(1),a=l(0);var i=function(){function n(){this.close=new a.EventEmitter,this.callback=new a.EventEmitter,this.isPaying=!1,this.setUp()}return n.prototype.pay=function(){if(this.setUp(),this.checkInput()){window.PaystackPop.setup(this.paystackOptions).openIframe(),this.isPaying=!0}},n.prototype.checkInput=function(){return this.key?this.email?this.amount?this.ref?!!this.callback.observers.length||console.error("ANGULAR-PAYSTACK: Insert a callback output like so (callback)='PaymentComplete($event)' to check payment status"):console.error("ANGULAR-PAYSTACK: Paystack ref cannot be empty"):console.error("ANGULAR-PAYSTACK: Paystack amount cannot be empty"):console.error("ANGULAR-PAYSTACK: Paystack email cannot be empty"):console.error("ANGULAR-PAYSTACK: Paystack key cannot be empty")},n.prototype.setUp=function(){var n=this;this.paystackOptions={key:this.key,email:this.email,amount:this.amount,ref:this.ref,metadata:this.metadata||{},currency:this.currency||"NGN",plan:this.plan||"",quantity:this.quantity||"",subaccount:this.subaccount||"",channels:this.channels,transaction_charge:this.transaction_charge||0,bearer:this.bearer||"",callback:function(e){n.isPaying=!1,n.callback.emit(e)},onClose:function(){n.isPaying=!1,n.close.emit()}}},n.prototype.loadScript=function(){return new Promise(function(n){if(window.PaystackPop&&"function"==typeof window.PaystackPop.setup)n();else{var e=window.document.createElement("script");window.document.head.appendChild(e);var l=function(){e.removeEventListener("load",l),n()};e.addEventListener("load",l),e.setAttribute("src","https://js.paystack.co/v1/inline.js")}})},n.prototype.buttonClick=function(){return Object(t.__awaiter)(this,void 0,void 0,function(){return Object(t.__generator)(this,function(n){switch(n.label){case 0:return this.isPaying?[2]:[4,this.loadScript()];case 1:return n.sent(),this.pay(),[2]}})})},n}();var o=function(){return function(){}}()}});