{"version":3,"sources":["../../src/pages/user-member-edit/user-member-edit.module.ts","../../src/interfaces/NewUser.ts","../../src/interfaces/Plans.ts","../../src/pages/user-member-edit/user-member-edit.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { UserMemberEditPage } from './user-member-edit';\nimport { SelectSearchableModule } from 'ionic-select-searchable';\n\n@NgModule({\n  declarations: [\n    UserMemberEditPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(UserMemberEditPage),\n    SelectSearchableModule\n  ],\n})\nexport class UserMemberEditPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-member-edit/user-member-edit.module.ts","export class NewUsers {\n  constructor(\n    public id: string,\n    public email: string,\n    public firstname: string,\n    public lastname: string,\n    public referencecode: any,\n    public password: string,\n    public phone: string,\n    public plantype: { id },\n    public platform: string,\n    public usertypes:{id, name},\n    public status:{id, name}\n  ) { }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/NewUser.ts","export class Plans {\n  constructor(\n    public id: string,\n    public plantype: { id, name, amount },\n    public startDate: string,\n    public endDate: String\n  ) { }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/Plans.ts","import { PaymentsProvider } from './../../providers/payments/payments';\nimport { GamesProvider } from './../../providers/games/games';\nimport { NewUsers } from './../../interfaces/NewUser';\nimport { SelectSearchableComponent } from 'ionic-select-searchable';\nimport { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, AlertController } from 'ionic-angular';\nimport { AuthenicationProvider } from '../../providers/authenication/authenication';\nimport { Plans } from '../../interfaces/Plans';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-user-member-edit',\n  templateUrl: 'user-member-edit.html',\n})\nexport class UserMemberEditPage {\n  @ViewChild('myselect') selectComponent: SelectSearchableComponent;\n  selecteduser: any;\n  statuses: any;\n  plantypes: any;\n  newuser: NewUsers = new NewUsers(\"\", \"\", \"\", \"\", \"\", \"\", \"\", { id: \"\" }, \"\", { id: \"\", name: \"\" }, { id: \"\", name: \"\" });\n  userplan: Plans = new Plans(\"\", { id: \"\", name: \"\", amount: \"\" }, \"\", \"\");\n  user: any;\n  constructor(public navCtrl: NavController,\n    private gamesProvider: GamesProvider,\n    private loadingCtrl: LoadingController,\n    private paymentsProvider: PaymentsProvider,\n    private alertCtrl: AlertController,\n    private authProvider: AuthenicationProvider,\n    public navParams: NavParams) {\n    this.selecteduser = this.navParams.get(\"user\");\n  }\n  ionViewWillEnter() {\n    if (this.selecteduser) {\n      this.GetUserDetails(this.selecteduser.id);\n    }\n\n    this.getPlantypes();\n    this.GetStatus();\n  }\n\n  GetUserDetails(id) {\n    let loading = this.loadingCtrl.create({\n      content: \"Please wait...\"\n    });\n    loading.present();\n    this.authProvider.findUserDetails(id)\n    .subscribe(result => {\n      loading.dismiss().catch(() => { });\n      if (result.statusCode == 200) {\n        this.userplan = result.data.planData;\n        this.newuser = result.data.userData;\n        this.user = result.data.planData;\n      }else{\n        this.authProvider.showToast(result.description);\n      }\n    }, error => {\n      loading.dismiss().catch(() => { });\n      this.authProvider.showToast(error.error.description);\n    })\n  }\n\n\n  getPlantypes() {\n    this.authProvider.getAllPlantypes().subscribe(result => {\n      this.plantypes = result.data;\n      console.log(this.plantypes);\n    })\n  }\n  onSelectPlantypes(event: { component: SelectSearchableComponent, value: any }) {\n    console.log(event.value);\n  }\n  onSelectStatus(event: { component: SelectSearchableComponent, value: any }) {\n    console.log(event.value);\n  }\n  GetStatus() {\n    this.gamesProvider.GetStatus(\"User\")\n      .subscribe(resp => {\n        if (resp.statusCode === 200) {\n          this.statuses = resp.data;\n        } else {\n          this.authProvider.showToast(resp.description);\n        }\n      }, error => {\n        this.authProvider.showToast(error.error.error);\n      });\n  }\n\n  updateAccount(user) {\n    console.log(user);\n    if (user) {\n      let loading = this.loadingCtrl.create({\n        content: \"Please wait...\"\n      });\n      loading.present();\n      this.authProvider.updateUser(user).subscribe(res => {\n        loading.dismiss().catch(() => { });\n        if (res.statusCode === 200) {\n          this.navCtrl.pop();\n        } else {\n          this.authProvider.showToast(res.description);\n        }\n      }, error => {\n        loading.dismiss().catch(() => { });\n        this.authProvider.showToast(error.error.error);\n      });\n    } else {\n      this.authProvider.showToast(\"Please, check something is wrong.\");\n    }\n  }\n\n\n  renewAccount(plan) {\n    this.newuser.platform = \"Manual\";\n    this.newuser.referencecode = \"Sure3Manual\";\n    // this.newuser.id\n\n    console.log(this.newuser.id, plan.plantype);\n    let loading = this.loadingCtrl.create({\n      content: \"Please wait...\"\n    });\n    let confirm = this.alertCtrl.create({\n      title: 'Update Plan',\n      message: \"You are about to update <b>\" + this.newuser.lastname + \"'s subscription plan</b> <br/> to \" + plan.plantype.name + \". <br/><br/>If <b>\" + plan.plantype.name + \"</b> is not the plan you want to update to, you can cancel and then select a new plan instead. <br/><br/>This action is irreversible.\",\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => {\n\n          }\n        },\n        {\n          text: 'Proceed',\n          handler: () => {\n            loading.present();\n            this.paymentsProvider.updatePlan(this.newuser.id, this.userplan.plantype.id, this.newuser.platform, this.newuser.referencecode).subscribe(res => {\n              loading.dismiss().catch(() => { });\n              if (res.statusCode === 200) {\n                this.navCtrl.pop();\n              } else {\n                this.authProvider.showToast(res.description);\n              }\n            }, error => {\n              loading.dismiss().catch(() => { });\n              this.authProvider.showToast(error.error.error);\n            });\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-member-edit/user-member-edit.ts"],"sourceRoot":""}